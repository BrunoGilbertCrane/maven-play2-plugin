<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 | Generated by Apache Maven Doxia at Jul 29, 2012
 | Rendered using Apache Maven Fluido Skin 1.2.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <link rel="stylesheet" href="./css/apache-maven-fluido.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido.min.js"></script>

    
    <meta name="Date-Revision-yyyymmdd" content="20120729" />
    <meta http-equiv="Content-Language" content="en" />
    
        </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/cescoffier/maven-play2-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 100;"
        src="https://a248.e.akamai.net/assets.github.com/img/7afbc8b248c68eb468279e8c17986ad46549fb71/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>play2-maven-plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2012-07-29</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.2.1-SNAPSHOT</li>
                      
                
            
      
                  </ul>
      </div>

            <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
            
                                    <h3>Overview</h3>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="plugin-info.html" title="Goals">Goals</a>
            </li>
                  <li class="none">
                          <a href="usage.html" title="Usage">Usage</a>
            </li>
                  <li class="none">
                          <a href="quickstart.html" title="Quickstart">Quickstart</a>
            </li>
                  <li class="none">
            <strong>Using the Maven Structure</strong>
          </li>
                  <li class="none">
                          <a href="module.html" title="Play2 Modules">Play2 Modules</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
          </ul>
                        <h3>Project Documentation</h3>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                                                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                      
            
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://github.com/cescoffier/maven-play2-plugin" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Using the Maven structure</h1>

<p>To some degree, you can configure Play to use a Maven-like directory structure. This page explains how this can be
configured.</p>

<h2>Using Maven artifactID and version</h2>

<p>Open the <em>project/Build.scala</em> file, and change the <em>appName</em> and <em>appVersion</em> variable definition to:</p>

<pre><code>def fromEnv(name: String) = System.getenv(name) match {
    case null =&gt; None
    case value =&gt; Some(value)
}

val appName = fromEnv("project.artifactId").getOrElse("my-app")
val appVersion = fromEnv("project.version").getOrElse("1.0-SNAPSHOT")
</code></pre>

<div class="alert alert-info">
  The <em>project.artifactId</em> and <em>project.version</em> variables are set by the plugin.
</div>

<h2>Source and Test folders</h2>

<p>We will now see how to configure the project to have our Java sources in <em>src/main/java</em>, Scala sources in <em>src/main/scala</em>,
and tests in <em>src/test/java</em> and <em>src/test/scala</em>. In the <em>project/Build.scala</em> file, update the Play Project definition to:</p>

<pre><code>val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
    // Source folders
    sourceDirectory in Compile &lt;&lt;= baseDirectory / "src/main/java",
    sourceDirectory in Test &lt;&lt;= baseDirectory / "src/test/java",

    scalaSource in Compile &lt;&lt;= baseDirectory / "src/main/scala",
    scalaSource in Test &lt;&lt;= baseDirectory / "src/test/scala",

    javaSource in Compile &lt;&lt;= baseDirectory / "src/main/java",
    javaSource in Test &lt;&lt;= baseDirectory / "src/test/java"
)
</code></pre>

<h2>Configuration folder</h2>

<p>Let's now see how to configure <em>src/main/conf</em> to be the Play 2 conf folder. Add to the Play Project settings the following
lines:</p>

<pre><code>confDirectory &lt;&lt;= baseDirectory / "src/main/conf",
resourceDirectory in Compile &lt;&lt;= baseDirectory / "src/main/conf"
</code></pre>

<p>You can move the <em>application.conf</em>, <em>routes</em> and others configuration files into this folder.</p>

<div class="alert alert-info">
  The <em>play</em> executable is checking for the existence of <em>conf/application.conf</em> to detect whether or not the folder
  contains a Play application. So, you still need a <em>conf/application.conf</em> file, but this file can be empty.
</div>

<h2>Static Assets</h2>

<p>Changing the <em>public</em> folder is a bit more complex as it requires two manipulations. First, in <em>project/Build.scala</em>, in
the project settings add:</p>

<pre><code>playAssetsDirectories := Seq.empty[File],
// The route file also needs to be updated...
playAssetsDirectories &lt;+= baseDirectory / "src/main/resources"
</code></pre>

<p>Then open the <em>route</em> file and change the reference to <em>/public</em> to:</p>

<pre><code># Map static resources from the /src/main/resources folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/src/main/resources", file)
</code></pre>

<h2>Unmanaged Dependencies</h2>

<p>Play is using the <em>lib</em> folder to store <em>unmanaged</em> dependencies (i.e. dependencies not managed by SBT). The plugin
populates this folder with the Maven dependencies declared in the project. By default, to be compatible with the
default Play layyout, it use the <em>lib</em> directory. However you can change it. In order to move this location to
<em>target/lib</em> you need to edit two files.</p>

<p>First, open the <em>project/Build.scala</em> file and in the project settings add:</p>

<pre><code>unmanagedBase &lt;&lt;= baseDirectory { base =&gt; base / "target/lib" }
</code></pre>

<p>Then, open the project <em>pom.xml</em> file and change the play2-maven-plugin configuration to:</p>

<pre><code>&lt;plugin&gt;
    &lt;groupId&gt;de.akquinet.innovation.play2&lt;/groupId&gt;
    &lt;artifactId&gt;play2-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.2.1-SNAPSHOT&lt;/version&gt;
    &lt;extensions&gt;true&lt;/extensions&gt;
    &lt;configuration&gt;
        &lt;lib&gt;target/lib&lt;/lib&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>

<h2>What can't be adapted right now</h2>

<ul>
<li>The <em>dist</em> folder can be set, but this settings is ignored by Play. It should be fixed in Play 2.1.</li>
</ul>

                  </div>
            </div>
      
    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span16">Copyright &copy;                   2012.
          All Rights Reserved.      
            
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
